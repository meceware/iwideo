/* 
 * iwideo v1.1.8
 * https://github.com/meceware/iwideo 
 * 
 * Made by Mehmet Celik (https://www.meceware.com/) 
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).iwideo=t()}(this,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),e}function n(){this._done=[],this._fail=[]}n.prototype={execute:function(e,t){var i=e.length;for(t=Array.prototype.slice.call(t);i--;)e[i].apply(null,t)},resolve:function(){this.execute(this._done,arguments)},reject:function(){this.execute(this._fail,arguments)},done:function(e){this._done.push(e)},fail:function(e){this._fail.push(e)}};var a=!1,r=!1,s=new n,l=function(){function i(o,n,l,p,u){var c=this,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(t(this,i),this.id=l,this.isValid()){if(!a){a=1;var y=n.createElement("script");y.src="https://www.youtube.com/iframe_api",n.querySelector("body").appendChild(y)}var f=function(t){"undefined"!=typeof YT&&0!==YT.loaded||r?"object"===("undefined"==typeof YT?"undefined":e(YT))&&1===YT.loaded?t():s.done((function(){t()})):(r=!0,o.onYouTubeIframeAPIReady=function(){o.onYouTubeIframeAPIReady=null,s.resolve("done"),t()})};f((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t={videoId:l,playerVars:{autoplay:u.autoplay?1:0,cc_load_policy:0,controls:0,disablekb:1,enablejsapi:1,fs:0,iv_load_policy:3,loop:u.loop?1:0,playlist:l,modestbranding:1,origin:void 0!==o.location.origin?o.location.origin:"".concat(o.location.protocol,"//").concat(o.location.hostname).concat(o.location.port?":"+o.location.port:""),playsinline:1,rel:0,start:0,allowfullscreen:!1,widgetid:1},events:{onReady:function(t){u.mute&&e.player.mute(),d.ready&&d.ready(t)},onStateChange:function(e){switch(e.data){case YT.PlayerState.ENDED:d.end&&d.end(e);break;case YT.PlayerState.PLAYING:d.play&&d.play(e);break;case YT.PlayerState.PAUSED:d.pause&&d.pause(e)}}}},i=n.createElement("div");p.appendChild(i),e.player=new YT.Player(i,t),d.create&&d.create(e.player.getIframe())}))}}return o(i,[{key:"isValid",value:function(){return!!this.id}},{key:"play",value:function(e){this.player&&(void 0!==e&&this.player.seekTo(e||0),YT.PlayerState.PLAYING!==this.player.getPlayerState()&&this.player.playVideo())}},{key:"pause",value:function(){this.player&&YT.PlayerState.PLAYING===this.player.getPlayerState()&&this.player.pauseVideo()}}]),i}(),p=0,u=0,c=new n,d=function(){function e(i,o,n,a){var r=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t(this,e),this.id=o,this.isValid()){if(!p){p=1;var l=i.createElement("script");l.src="https://player.vimeo.com/api/player.js",i.querySelector("body").appendChild(l)}var d=function(e){if("undefined"!=typeof Vimeo||u)"undefined"!=typeof Vimeo?e():c.done((function(){e()}));else{u=!0;var t=setInterval((function(){"undefined"!=typeof Vimeo&&(clearInterval(t),c.resolve("done"),e())}),100)}};d((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t={autopause:0,autoplay:a.autoplay?1:0,background:1,byline:0,controls:0,loop:a.loop?1:0,muted:a.mute?1:0,portrait:0,transparent:1,title:0,badge:0},l="";Object.keys(t).forEach((function(e){""!==l&&(l+="&"),l+="".concat(e,"=").concat(encodeURIComponent(t[e]))}));var p=i.createElement("iframe");p.setAttribute("src","https://player.vimeo.com/video/".concat(o,"?").concat(l)),p.setAttribute("frameborder","0"),p.setAttribute("mozallowfullscreen",""),p.setAttribute("webkitallowfullscreen",""),p.setAttribute("allowfullscreen",""),n.appendChild(p),s.create&&s.create(p),e.player=new Vimeo.Player(p,t),e.player.on("play",(function(e){s.play&&s.play(e)})),e.player.on("pause",(function(e){s.pause&&s.pause(e)})),e.player.on("ended",(function(e){s.end&&s.end(e)})),e.player.on("loaded",(function(e){s.ready&&s.ready(e)}))}))}}return o(e,[{key:"isValid",value:function(){return!!this.id}},{key:"play",value:function(e){var t=this;t.player&&(void 0!==e&&t.player.player.setCurrentTime(e||0),t.player.getPaused().then((function(e){e&&t.player.play()})))}},{key:"pause",value:function(){var e=this;e.player&&e.player.getPaused().then((function(t){t||e.player.pause()}))}}]),e}(),y=function(){function e(i,o,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t(this,e),this.id=o,this.isValid()){var s=i.createElement("video");a.mute&&(s.muted=!0),s.loop=a.loop,s.setAttribute("playsinline",""),s.setAttribute("webkit-playsinline",""),Object.keys(o).forEach((function(e){var t=i.createElement("source");t.src=o[e],t.type="video/".concat(e),s.appendChild(t)})),this.player=s,n.appendChild(s),r.create&&r.create(s),s.addEventListener("play",(function(e){r.play&&r.play(e)})),s.addEventListener("pause",(function(e){r.pause&&r.pause(e)})),s.addEventListener("ended",(function(e){r.end&&r.end(e)})),s.addEventListener("loadedmetadata",(function(){r.ready&&r.ready(),a.autoplay&&s.play()}))}}return o(e,[{key:"isValid",value:function(){return!!this.id}},{key:"play",value:function(e){this.player&&(void 0!==e&&(this.player.currentTime=e),this.player.paused&&this.player.play())}},{key:"pause",value:function(){this.player&&(this.player.paused||this.player.pause())}}]),e}();var f,h=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){function i(e,t,i,o){var n,a=!1,r=0;function s(){n&&clearTimeout(n)}function l(){for(var l=arguments.length,p=new Array(l),u=0;u<l;u++)p[u]=arguments[u];var c=this,d=Date.now()-r;function y(){r=Date.now(),i.apply(c,p)}function f(){n=void 0}a||(o&&!n&&y(),s(),void 0===o&&d>e?y():!0!==t&&(n=setTimeout(o?f:y,void 0===o?e-d:e)))}return"boolean"!=typeof t&&(o=i,i=t,t=void 0),l.cancel=function(){s(),a=!0},l}Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e,t,o){return void 0===o?i(e,t,!1):i(e,o,!1!==t)},t.throttle=i}));(f=h)&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")&&f.default,h.debounce;var v=h.throttle;return function(i,n){if(void 0!==i.document){var a={wrapperClass:"iwideo-wrapper",overlayClass:"iwideo-overlay",src:!1,ratio:1.7778,autoplay:!0,extra:!1,loop:!0,mute:!0,poster:"",posterStyle:{size:"cover",position:"center center",repeat:"no-repeat",attachment:"scroll"},zIndex:-1,autoResize:!0,isMobile:function(){var e=/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/g.test(navigator.userAgent||navigator.vendor||i.opera);return e||i.innerWidth<768}},r=function(e,t,i){for(var o=0;o<e.length;o++)t.call(i,e[o])},s=function(){function r(o){var s=this,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t(this,r),Object.keys(a).forEach((function(e){Object.prototype.hasOwnProperty.call(p,e)||(p[e]=a[e])})),"string"==typeof p.ratio&&(p.ratio="4/3"===p.ratio?4/3:16/9),this.options=p,this.container="string"==typeof o?n.querySelector(o):o,!this.container)return new Error("Could not find the container: ".concat(o));var u=function(t){var i={type:!1,id:!1};if(!t)return i;if("object"===e(t))return Object.prototype.hasOwnProperty.call(t,"mp4")||Object.prototype.hasOwnProperty.call(t,"ogv")||Object.prototype.hasOwnProperty.call(t,"ogg")||Object.prototype.hasOwnProperty.call(t,"webm")?{type:"html5",id:t}:i;var o=function(e){var t=e.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);return!(!t||11!==t[1].length)&&t[1]}(t),n=function(e){var t=e.match(/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/);return!(!t||!t[3])&&t[3]}(t),a=function(e){var t=e.split(/,(?=mp4\:|webm\:|ogv\:|ogg\:)/),i={},o=0;return t.forEach((function(e){var t=e.match(/^(mp4|webm|ogv|ogg)\:(.*)/);t&&t[1]&&t[2]&&(i["ogv"===t[1]?"ogg":t[1]]=t[2],o=1)})),!!o&&i}(t);return o?{type:"youtube",id:o}:n?{type:"vimeo",id:n}:a?{type:"html5",id:a}:i},c=u(this.options.src);this.type=c.type,this.videoID=c.id;var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=getComputedStyle(e.container,null);"static"===t.getPropertyValue("position")&&(e.container.style.position="relative");var i=n.createElement("div");i.style.position="absolute",e.options.wrapperClass&&("function"==typeof e.options.wrapperClass?i.classList.add(e.options.wrapperClass.call(e)):i.classList.add.apply(i.classList,e.options.wrapperClass.split(/[ ,]+/))),i.style.left=0,i.style.top=0,i.style.height="100%",i.style.width="100%",i.style.overflow="hidden",i.style.zIndex=parseInt(e.options.zIndex,10),e.options.poster&&(i.style.backgroundSize=e.options.posterStyle.size,i.style.backgroundPosition=e.options.posterStyle.position,i.style.backgroundRepeat=e.options.posterStyle.repeat,i.style.backgroundAttachment=e.options.posterStyle.attachment,i.style.backgroundImage="url('".concat(e.options.poster,"')")),e.wrapper=i,e.container.insertBefore(i,e.container.firstChild)},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=n.createElement("div");t.style.position="absolute",e.options.overlayClass&&("function"==typeof e.options.overlayClass?t.classList.add(e.options.overlayClass.call(e)):t.classList.add.apply(t.classList,e.options.overlayClass.split(/[ ,]+/))),t.style.left=0,t.style.top=0,t.style.height="100%",t.style.width="100%",e.wrapper.appendChild(t)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t={ready:function(){e.fire("ready",e)},play:function(t){e.el.style.opacity="1",e.fire("play",e,t)},pause:function(t){e.fire("pause",e,t)},end:function(t){e.options.loop||(e.el.style.opacity="0"),e.fire("end",e,t)},create:function(t){t.style.position="absolute",t.style.left="50%",t.style.top="50%",t.style.transform="translate(-50%, -50%)",t.style.webkitTransform="translate(-50%, -50%)",t.style.msTransform="translate(-50%, -50%)",t.style.oTransform="translate(-50%, -50%)",t.style.mozTransform="translate(-50%, -50%)",t.style.minWidth="100%",t.style.minHeight="100%",t.style.opacity="0",e.options.extra&&Object.keys(e.options.extra).forEach((function(i){t.setAttribute(i,e.options.extra[i])})),e.el=t,e.resize(),e.fire("create",e,t)}};"youtube"===e.type?e.worker=new l(i,n,e.videoID,e.wrapper,e.options,t):"html5"===e.type?e.worker=new y(n,e.videoID,e.wrapper,e.options,t):"vimeo"===e.type&&(e.worker=new d(n,e.videoID,e.wrapper,e.options,t))};f(),!this.type||this.options.isMobile&&this.options.isMobile()||m(),h(),this.options.autoResize&&i.addEventListener("resize",v(200,this.resize).bind(this),!1),this.resize(),this.container.iwideo=this,this.container.setAttribute("data-iwideo-initialized",!0)}return o(r,[{key:"destroy",value:function(){try{this.container.removeChild(this.wrapper),delete this.container.iwideo.worker,delete this.container.iwideo}catch(e){}}},{key:"resize",value:function(){var e=this;if(this.el){var t=this.container.offsetHeight,i=this.container.offsetWidth;if(1<this.options.ratio&&i/t<this.options.ratio||1>this.options.ratio&&t/i<this.options.ratio){var o=parseInt(this.el.offsetHeight*this.options.ratio)+200;this.el.style.maxHeight="100%",this.el.style.maxWidth="none",this.el.style.height="",this.el.style.width=o+"px",setTimeout((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;t.el.style.width=o+"px"}),10)}else this.el.style.maxHeight="none",this.el.style.maxWidth="100%",this.el.style.height=this.el.offsetWidth/this.options.ratio+"px",this.el.style.width="",this.el.offsetHeight<this.wrapper.offsetHeight+140&&(this.el.style.height=this.el.offsetWidth/this.options.ratio+140+"px")}}},{key:"play",value:function(){return this.worker&&this.worker.play(),this}},{key:"pause",value:function(){return this.worker&&this.worker.pause(),this}},{key:"showPoster",value:function(){this.pause().el.style.opacity="0"}},{key:"on",value:function(e,t){this.userEventsList=this.userEventsList||[],(this.userEventsList[e]||(this.userEventsList[e]=[])).push(t)}},{key:"off",value:function(e,t){var i=this;this.userEventsList&&this.userEventsList[e]&&(t?this.userEventsList[e].forEach((function(o,n){o===t&&(i.userEventsList[e][n]=!1)})):delete this.userEventsList[e])}},{key:"fire",value:function(e){var t=[].slice.call(arguments,1);if(this.userEventsList&&void 0!==this.userEventsList[e]){var i=this;i.userEventsList[e].forEach((function(e){e&&e.apply(i,t)}))}}}]),r}();return s.destroy=function(){r(n.querySelectorAll("[data-iwideo-initialized]"),(function(e){e.iwideo.destroy()}))},s.resize=function(){r(n.querySelectorAll("[data-iwideo-initialized]"),(function(e){e.iwideo.resize()}))},s.scan=function(){var e=function(){r(n.querySelectorAll("[data-iwideo]"),(function(e){if(void 0===e.iwideo)try{new s(e,JSON.parse(decodeURIComponent(e.getAttribute("data-iwideo"))))}catch(e){}}))};"loading"!=n.readyState?e():n.addEventListener("DOMContentLoaded",e)},s.scan(),s}}("undefined"!=typeof window?window:void 0,document)}));
