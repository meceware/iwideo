/* 
 * iwideo v1.1.12
 * https://github.com/meceware/iwideo 
 * 
 * Made by Mehmet Celik (https://www.meceware.com/) 
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).iwideo=t()}(this,(function(){"use strict";function e(){this._done=[],this._fail=[]}e.prototype={execute(e,t){let i=e.length;for(t=Array.prototype.slice.call(t);i--;)e[i].apply(null,t)},resolve(){this.execute(this._done,arguments)},reject(){this.execute(this._fail,arguments)},done(e){this._done.push(e)},fail(e){this._fail.push(e)}};let t=!1,i=!1;const o=new e;class s{constructor(e,s,a,r,n){var l=this;let p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(this.id=a,!this.isValid())return;if(!t){t=1;const e=s.createElement("script");e.src="https://www.youtube.com/iframe_api",s.querySelector("body").appendChild(e)}var d;d=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;const i={videoId:a,playerVars:{autoplay:n.autoplay?1:0,cc_load_policy:0,controls:0,disablekb:1,enablejsapi:1,fs:0,iv_load_policy:3,loop:n.loop?1:0,playlist:a,modestbranding:1,origin:void 0!==e.location.origin?e.location.origin:`${e.location.protocol}//${e.location.hostname}${e.location.port?":"+e.location.port:""}`,playsinline:1,rel:0,start:0,allowfullscreen:!1,widgetid:1},events:{onReady:e=>{n.mute&&t.player.mute(),p.ready&&p.ready(e)},onStateChange:e=>{switch(e.data){case YT.PlayerState.ENDED:p.end&&p.end(e);break;case YT.PlayerState.PLAYING:p.play&&p.play(e);break;case YT.PlayerState.PAUSED:p.pause&&p.pause(e)}}}},o=s.createElement("div");r.appendChild(o),t.player=new YT.Player(o,i),p.create&&p.create(t.player.getIframe())},"undefined"!=typeof YT&&0!==YT.loaded||i?"object"==typeof YT&&1===YT.loaded?d():o.done((()=>{d()})):(i=!0,e.onYouTubeIframeAPIReady=function(){e.onYouTubeIframeAPIReady=null,o.resolve("done"),d()})}isValid(){return!!this.id}play(e){this.player&&(void 0!==e&&this.player.seekTo(e||0),YT.PlayerState.PLAYING!==this.player.getPlayerState()&&this.player.playVideo())}pause(){this.player&&YT.PlayerState.PLAYING===this.player.getPlayerState()&&this.player.pauseVideo()}}let a=0,r=0;const n=new e;class l{constructor(e,t,i,o){var s=this;let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(this.id=t,!this.isValid())return;if(!a){a=1;const t=e.createElement("script");t.src="https://player.vimeo.com/api/player.js",e.querySelector("body").appendChild(t)}(e=>{if("undefined"!=typeof Vimeo||r)"undefined"!=typeof Vimeo?e():n.done((()=>{e()}));else{r=!0;const t=setInterval((()=>{"undefined"!=typeof Vimeo&&(clearInterval(t),n.resolve("done"),e())}),100)}})((function(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;const r={autopause:0,autoplay:o.autoplay?1:0,background:1,byline:0,controls:0,loop:o.loop?1:0,muted:o.mute?1:0,portrait:0,transparent:1,title:0,badge:0};let n="";Object.keys(r).forEach((e=>{""!==n&&(n+="&"),n+=`${e} = ${encodeURIComponent(r[e])}`}));const p=e.createElement("iframe");p.setAttribute("src",`https://player.vimeo.com/video/${t}?${n}`),p.setAttribute("frameborder","0"),p.setAttribute("mozallowfullscreen",""),p.setAttribute("webkitallowfullscreen",""),p.setAttribute("allowfullscreen",""),i.appendChild(p),l.create&&l.create(p),a.player=new Vimeo.Player(p,r),a.player.on("play",(e=>{l.play&&l.play(e)})),a.player.on("pause",(e=>{l.pause&&l.pause(e)})),a.player.on("ended",(e=>{l.end&&l.end(e)})),a.player.on("loaded",(e=>{l.ready&&l.ready(e)}))}))}isValid(){return!!this.id}play(e){const t=this;t.player&&(void 0!==e&&t.player.player.setCurrentTime(e||0),t.player.getPaused().then((e=>{e&&t.player.play()})))}pause(){const e=this;e.player&&e.player.getPaused().then((t=>{t||e.player.pause()}))}}class p{constructor(e,t,i,o){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(this.id=t,!this.isValid())return;const a=e.createElement("video");o.mute&&(a.muted=!0),a.loop=o.loop,a.setAttribute("playsinline",""),a.setAttribute("webkit-playsinline",""),Object.keys(t).forEach((i=>{const o=e.createElement("source");o.src=t[i],o.type=`video/${i}`,a.appendChild(o)})),this.player=a,i.appendChild(a),s.create&&s.create(a),a.addEventListener("play",(e=>{s.play&&s.play(e)})),a.addEventListener("pause",(e=>{s.pause&&s.pause(e)})),a.addEventListener("ended",(e=>{s.end&&s.end(e)})),a.addEventListener("loadedmetadata",(function(){s.ready&&s.ready(),o.autoplay&&a.play()}))}isValid(){return!!this.id}play(e){this.player&&(void 0!==e&&(this.player.currentTime=e),this.player.paused&&this.player.play())}pause(){this.player&&(this.player.paused||this.player.pause())}}var d=((e,t)=>{if(void 0===e.document)return;const i={wrapperClass:"iwideo-wrapper",overlayClass:"iwideo-overlay",src:!1,ratio:1.7778,autoplay:!0,extra:!1,loop:!0,mute:!0,poster:"",posterStyle:{size:"cover",position:"center center",repeat:"no-repeat",attachment:"scroll"},zIndex:-1,autoResize:!0,isMobile:()=>/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/g.test(navigator.userAgent||navigator.vendor||e.opera)||e.innerWidth<768},o=(e,t,i)=>{for(let o=0;o<e.length;o++)t.call(i,e[o])};class a{constructor(o){var a=this;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Object.keys(i).forEach((e=>{Object.prototype.hasOwnProperty.call(r,e)||(r[e]=i[e])})),"string"==typeof r.ratio&&(r.ratio="4/3"===r.ratio?4/3:16/9),this.options=r,this.container="string"==typeof o?t.querySelector(o):o,!this.container)return new Error(`Could not find the container: ${o}`);const n=(e=>{const t={type:!1,id:!1};if(!e)return t;if("object"==typeof e)return Object.prototype.hasOwnProperty.call(e,"mp4")||Object.prototype.hasOwnProperty.call(e,"ogv")||Object.prototype.hasOwnProperty.call(e,"ogg")||Object.prototype.hasOwnProperty.call(e,"webm")?{type:"html5",id:e}:t;const i=(e=>{const t=e.match(/.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/);return!(!t||11!==t[1].length)&&t[1]})(e),o=(e=>{const t=e.match(/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/);return!(!t||!t[3])&&t[3]})(e),s=(e=>{const t=e.split(/,(?=mp4\:|webm\:|ogv\:|ogg\:)/),i={};let o=0;return t.forEach((e=>{const t=e.match(/^(mp4|webm|ogv|ogg)\:(.*)/);t&&t[1]&&t[2]&&(i["ogv"===t[1]?"ogg":t[1]]=t[2],o=1)})),!!o&&i})(e);return i?{type:"youtube",id:i}:o?{type:"vimeo",id:o}:s?{type:"html5",id:s}:t})(this.options.src);this.type=n.type,this.videoID=n.id;!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;const i=getComputedStyle(e.container,null);"static"===i.getPropertyValue("position")&&(e.container.style.position="relative");const o=t.createElement("div");o.style.position="absolute",e.options.wrapperClass&&("function"==typeof e.options.wrapperClass?o.classList.add(e.options.wrapperClass.call(e)):o.classList.add.apply(o.classList,e.options.wrapperClass.split(/[ ,]+/))),o.style.left=0,o.style.top=0,o.style.height="100%",o.style.width="100%",o.style.overflow="hidden",o.style.zIndex=parseInt(e.options.zIndex,10),e.options.poster&&(o.style.backgroundSize=e.options.posterStyle.size,o.style.backgroundPosition=e.options.posterStyle.position,o.style.backgroundRepeat=e.options.posterStyle.repeat,o.style.backgroundAttachment=e.options.posterStyle.attachment,o.style.backgroundImage=`url('${e.options.poster}')`),e.wrapper=o,e.container.insertBefore(o,e.container.firstChild)}(),!this.type||this.options.isMobile&&this.options.isMobile()||function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;const o={ready:()=>{i.fire("ready",i)},play:e=>{i.el.style.opacity="1",i.fire("play",i,e)},pause:e=>{i.fire("pause",i,e)},end:e=>{i.options.loop||(i.el.style.opacity="0"),i.fire("end",i,e)},create:e=>{e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%)",e.style.webkitTransform="translate(-50%, -50%)",e.style.msTransform="translate(-50%, -50%)",e.style.oTransform="translate(-50%, -50%)",e.style.mozTransform="translate(-50%, -50%)",e.style.minWidth="100%",e.style.minHeight="100%",e.style.opacity="0",i.options.extra&&Object.keys(i.options.extra).forEach((t=>{e.setAttribute(t,i.options.extra[t])})),i.el=e,i.resize(),i.fire("create",i,e)}};"youtube"===i.type?i.worker=new s(e,t,i.videoID,i.wrapper,i.options,o):"html5"===i.type?i.worker=new p(t,i.videoID,i.wrapper,i.options,o):"vimeo"===i.type&&(i.worker=new l(t,i.videoID,i.wrapper,i.options,o))}(),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a;const i=t.createElement("div");i.style.position="absolute",e.options.overlayClass&&("function"==typeof e.options.overlayClass?i.classList.add(e.options.overlayClass.call(e)):i.classList.add.apply(i.classList,e.options.overlayClass.split(/[ ,]+/))),i.style.left=0,i.style.top=0,i.style.height="100%",i.style.width="100%",e.wrapper.appendChild(i)}(),this.options.autoResize&&e.addEventListener("resize",function(e,t,i,o){var s,a=!1,r=0;function n(){s&&clearTimeout(s)}function l(){for(var l=arguments.length,p=new Array(l),d=0;d<l;d++)p[d]=arguments[d];var y=this,c=Date.now()-r;function h(){r=Date.now(),i.apply(y,p)}function u(){s=void 0}a||(o&&!s&&h(),n(),void 0===o&&c>e?h():!0!==t&&(s=setTimeout(o?u:h,void 0===o?e-c:e)))}return"boolean"!=typeof t&&(o=i,i=t,t=void 0),l.cancel=function(){n(),a=!0},l}(200,this.resize).bind(this),!1),this.resize(),this.container.iwideo=this,this.container.setAttribute("data-iwideo-initialized",!0)}destroy(){try{this.container.removeChild(this.wrapper),delete this.container.iwideo.worker,delete this.container.iwideo}catch(e){}}resize(){var e=this;if(!this.el)return;const t=this.container.offsetHeight,i=this.container.offsetWidth;if(1<this.options.ratio&&i/t<this.options.ratio||1>this.options.ratio&&t/i<this.options.ratio){const t=parseInt(this.el.offsetHeight*this.options.ratio)+200;this.el.style.maxHeight="100%",this.el.style.maxWidth="none",this.el.style.height="",this.el.style.width=t+"px",setTimeout((function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;i.el.style.width=t+"px"}),10)}else this.el.style.maxHeight="none",this.el.style.maxWidth="100%",this.el.style.height=this.el.offsetWidth/this.options.ratio+"px",this.el.style.width="",this.el.offsetHeight<this.wrapper.offsetHeight+140&&(this.el.style.height=this.el.offsetWidth/this.options.ratio+140+"px")}play(){return this.worker&&this.worker.play(),this}pause(){return this.worker&&this.worker.pause(),this}showPoster(){this.pause().el.style.opacity="0"}on(e,t){this.userEventsList=this.userEventsList||[],(this.userEventsList[e]||(this.userEventsList[e]=[])).push(t)}off(e,t){this.userEventsList&&this.userEventsList[e]&&(t?this.userEventsList[e].forEach(((i,o)=>{i===t&&(this.userEventsList[e][o]=!1)})):delete this.userEventsList[e])}fire(e){const t=[].slice.call(arguments,1);if(this.userEventsList&&void 0!==this.userEventsList[e]){const i=this;i.userEventsList[e].forEach((function(e){e&&e.apply(i,t)}))}}}return a.destroy=()=>{o(t.querySelectorAll("[data-iwideo-initialized]"),(e=>{e.iwideo.destroy()}))},a.resize=()=>{o(t.querySelectorAll("[data-iwideo-initialized]"),(e=>{e.iwideo.resize()}))},a.scan=()=>{const e=()=>{o(t.querySelectorAll("[data-iwideo]"),(e=>{if(void 0===e.iwideo)try{new a(e,JSON.parse(decodeURIComponent(e.getAttribute("data-iwideo"))))}catch(e){}}))};"loading"!==t.readyState?e():t.addEventListener("DOMContentLoaded",e)},a.scan(),a})("undefined"!=typeof window?window:void 0,document);return d}));
